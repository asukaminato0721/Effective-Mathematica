# 如何评估程序的性能

虽然 Mathematica 的速度并不算快，但是可以通过评估性能来写更快的程序。

## 测试运行速度

### `AbsoluteTiming`

---

### `Timing`

---

### `RepeatedTiming`

---

## 下面介绍 Undocumented 函数

运行

```
?*`Benchmark*
```

我们能看到

```
GeneralUtilities`Benchmark
```
和
```
GeneralUtilities\`BenchmarkPlot
```

使用方法：

一般分为 2 种测试，单数据和批量数据。

举例：

想测试 `Sort` 函数的时间复杂度。`Sort` 是作用在 `List` 上的，所以用 `Range` 包装

```Mathematica
GeneralUtilities`BenchmarkPlot[Sort, Range, "IncludeFits" -> True]
```

测试结果为 `n log(n)`

再测试 `Total` 和 `Plus@@#&` 的速度

```Mathematica
GeneralUtilities`BenchmarkPlot[{Total, Plus @@ #1 &}, Range, 
 "IncludeFits" -> True]
```

可以发现 `Total` 快很多

---

那单数据如何解决呢？

```Mathematica
GeneralUtilities`BenchmarkPlot[f,#&, "IncludeFits" -> True]
```

---

> 下面的内容由 [@miRoox](https://github.com/miRoox/) 提供

对于 $Version >= 11.3 的用户，可以选择

```Mathematica
ResourceFunction["BenchmarkPlot"]
```

https://resources.wolframcloud.com/FunctionRepository/resources/BenchmarkPlot

其函数定义为

```
BenchmarkPlot[args___] := (Needs["GeneralUtilities`"]; 
GeneralUtilities`BenchmarkPlot[args])
```

> 对，就是套了层皮

或者 [EvaluateBenchmark](https://resources.wolframcloud.com/FunctionRepository/resources/EvaluateBenchmark)

参考资料

<https://mathematica.stackexchange.com/questions/22419/benchmarking-expressions/22427#22427>
