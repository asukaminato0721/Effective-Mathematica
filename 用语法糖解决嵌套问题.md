# 用 `//` `/*` `@*` 等函数解决嵌套问题

作为函数式编程，一般代码写到后面会这样。

```Mathematica
foo1[foo2[foo3[x,temp],temp2],temp3]
```

再加上 `Part`

于是满屏的 `[[][][][][][[[[[]]][[[]]][][][][[[]]]]]]`

---

> 所以 Mathematica 提供了语法糖。

## `//`

`//` 的好处

1. 优先级低，不容易出问题。

基本对于所有的 `expr` ， `expr//f` 都是 `f[expr]`

That is to say, 我们可以很方便地从左往右读代码，而不需要栈。

比较一下这两个程序的易读性

```Mathematica
a[b[c[d[e[f[g[x]]]]]]
```

```Mathematica
x//g//f//e//d//c//b//a
```

对于上面那个，阅读顺序是从中间向外。

下面那个，阅读顺序就是从左向右

再阅读这段代码

```Mathematica
data//
Accumulate[#,para]&//
ListPlot
```

一行干一件事

---

## `/*`

这个函数的作用是

```Mathematica
f/*g/*h[x]
```

等价于

```Mathematica
x//f//g//h
```

---

有时候我们需要临时给函数加一些 `Attributes`

这时候用 `@*`

比如 `Range[5]//Apply[Defer@*Plus]`

如果先写了 `Defer@*Plus`， 因为 `@*` 的优先级很低，所以需要加括号。这意味着鼠标需要前移。会打断流畅性。

那么就可以这么写

```Mathematica
Defer@*Plus // # @@ Range[5] &
```

---

